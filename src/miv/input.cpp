#include "miv/input.hpp"

#include <boost/algorithm/string.hpp>

map<Key, string> key_to_str = {
    { Key::ESCAPE                        , "Escape"                       },
    { Key::TAB                           , "Tab"                          },
    { Key::BACKTAB                       , "Backtab"                      },
    { Key::BACKSPACE                     , "Backspace"                    },
    { Key::RETURN                        , "Return"                       },
    { Key::ENTER                         , "Enter"                        },
    { Key::INSERT                        , "Insert"                       },
    { Key::DELETE                        , "Delete"                       },
    { Key::PAUSE                         , "Pause"                        },
    { Key::PRINT                         , "Print"                        },
    { Key::SYSREQ                        , "Sysreq"                       },
    { Key::CLEAR                         , "Clear"                        },
    { Key::HOME                          , "Home"                         },
    { Key::END                           , "End"                          },
    { Key::LEFT                          , "Left"                         },
    { Key::UP                            , "Up"                           },
    { Key::RIGHT                         , "Right"                        },
    { Key::DOWN                          , "Down"                         },
    { Key::PAGE_UP                       , "PageUp"                       },
    { Key::PAGE_DOWN                     , "PageDown"                     },
    { Key::SHIFT                         , "Shift"                        },
    { Key::CONTROL                       , "Control"                      },
    { Key::META                          , "Meta"                         },
    { Key::ALT                           , "Alt"                          },
    { Key::ALTGR                         , "Altgr"                        },
    { Key::CAPS_LOCK                     , "CapsLock"                     },
    { Key::NUM_LOCK                      , "NumLock"                      },
    { Key::SCROLL_LOCK                   , "ScrollLock"                   },
    { Key::F1                            , "F1"                           },
    { Key::F2                            , "F2"                           },
    { Key::F3                            , "F3"                           },
    { Key::F4                            , "F4"                           },
    { Key::F5                            , "F5"                           },
    { Key::F6                            , "F6"                           },
    { Key::F7                            , "F7"                           },
    { Key::F8                            , "F8"                           },
    { Key::F9                            , "F9"                           },
    { Key::F10                           , "F10"                          },
    { Key::F11                           , "F11"                          },
    { Key::F12                           , "F12"                          },
    { Key::F13                           , "F13"                          },
    { Key::F14                           , "F14"                          },
    { Key::F15                           , "F15"                          },
    { Key::F16                           , "F16"                          },
    { Key::F17                           , "F17"                          },
    { Key::F18                           , "F18"                          },
    { Key::F19                           , "F19"                          },
    { Key::F20                           , "F20"                          },
    { Key::F21                           , "F21"                          },
    { Key::F22                           , "F22"                          },
    { Key::F23                           , "F23"                          },
    { Key::F24                           , "F24"                          },
    { Key::F25                           , "F25"                          },
    { Key::F26                           , "F26"                          },
    { Key::F27                           , "F27"                          },
    { Key::F28                           , "F28"                          },
    { Key::F29                           , "F29"                          },
    { Key::F30                           , "F30"                          },
    { Key::F31                           , "F31"                          },
    { Key::F32                           , "F32"                          },
    { Key::F33                           , "F33"                          },
    { Key::F34                           , "F34"                          },
    { Key::F35                           , "F35"                          },
    { Key::SUPER_L                       , "SuperL"                       },
    { Key::SUPER_R                       , "SuperR"                       },
    { Key::MENU                          , "Menu"                         },
    { Key::HYPER_L                       , "HyperL"                       },
    { Key::HYPER_R                       , "HyperR"                       },
    { Key::HELP                          , "Help"                         },
    { Key::DIRECTION_L                   , "DirectionL"                   },
    { Key::DIRECTION_R                   , "DirectionR"                   },
    { Key::SPACE                         , "Space"                        },
    { Key::ANY                           , "Any"                          },
    { Key::EXCLAM                        , "Exclam"                       },
    { Key::QUOTE_DBL                     , "QuoteDbl"                     },
    { Key::NUMBER_SIGN                   , "NumberSign"                   },
    { Key::DOLLAR                        , "Dollar"                       },
    { Key::PERCENT                       , "Percent"                      },
    { Key::AMPERSAND                     , "Ampersand"                    },
    { Key::APOSTROPHE                    , "Apostrophe"                   },
    { Key::PAREN_LEFT                    , "ParenLeft"                    },
    { Key::PAREN_RIGHT                   , "ParenRight"                   },
    { Key::ASTERISK                      , "Asterisk"                     },
    { Key::PLUS                          , "Plus"                         },
    { Key::COMMA                         , "Comma"                        },
    { Key::MINUS                         , "Minus"                        },
    { Key::PERIOD                        , "Period"                       },
    { Key::SLASH                         , "Slash"                        },
    { Key::NUM_0                         , "Num0"                         },
    { Key::NUM_1                         , "Num1"                         },
    { Key::NUM_2                         , "Num2"                         },
    { Key::NUM_3                         , "Num3"                         },
    { Key::NUM_4                         , "Num4"                         },
    { Key::NUM_5                         , "Num5"                         },
    { Key::NUM_6                         , "Num6"                         },
    { Key::NUM_7                         , "Num7"                         },
    { Key::NUM_8                         , "Num8"                         },
    { Key::NUM_9                         , "Num9"                         },
    { Key::COLON                         , "Colon"                        },
    { Key::SEMICOLON                     , "Semicolon"                    },
    { Key::LESS                          , "Less"                         },
    { Key::EQUAL                         , "Equal"                        },
    { Key::GREATER                       , "Greater"                      },
    { Key::QUESTION                      , "Question"                     },
    { Key::AT                            , "At"                           },
    { Key::A                             , "A"                            },
    { Key::B                             , "B"                            },
    { Key::C                             , "C"                            },
    { Key::D                             , "D"                            },
    { Key::E                             , "E"                            },
    { Key::F                             , "F"                            },
    { Key::G                             , "G"                            },
    { Key::H                             , "H"                            },
    { Key::I                             , "I"                            },
    { Key::J                             , "J"                            },
    { Key::K                             , "K"                            },
    { Key::L                             , "L"                            },
    { Key::M                             , "M"                            },
    { Key::N                             , "N"                            },
    { Key::O                             , "O"                            },
    { Key::P                             , "P"                            },
    { Key::Q                             , "Q"                            },
    { Key::R                             , "R"                            },
    { Key::S                             , "S"                            },
    { Key::T                             , "T"                            },
    { Key::U                             , "U"                            },
    { Key::V                             , "V"                            },
    { Key::W                             , "W"                            },
    { Key::X                             , "X"                            },
    { Key::Y                             , "Y"                            },
    { Key::Z                             , "Z"                            },
    { Key::BRACKET_LEFT                  , "BracketLeft"                  },
    { Key::BACKSLASH                     , "Backslash"                    },
    { Key::BRACKET_RIGHT                 , "BracketRight"                 },
    { Key::ASCII_CIRCUM                  , "AsciiCircum"                  },
    { Key::UNDERSCORE                    , "Underscore"                   },
    { Key::QUOTE_LEFT                    , "QuoteLeft"                    },
    { Key::BRACE_LEFT                    , "BraceLeft"                    },
    { Key::BAR                           , "Bar"                          },
    { Key::BRACE_RIGHT                   , "BraceRight"                   },
    { Key::ASCII_TILDE                   , "AsciiTilde"                   },
    { Key::NOBREAKSPACE                  , "Nobreakspace"                 },
    { Key::EXCLAMDOWN                    , "Exclamdown"                   },
    { Key::CENT                          , "Cent"                         },
    { Key::STERLING                      , "Sterling"                     },
    { Key::CURRENCY                      , "Currency"                     },
    { Key::YEN                           , "Yen"                          },
    { Key::BROKENBAR                     , "Brokenbar"                    },
    { Key::SECTION                       , "Section"                      },
    { Key::DIAERESIS                     , "Diaeresis"                    },
    { Key::COPYRIGHT                     , "Copyright"                    },
    { Key::ORDFEMININE                   , "Ordfeminine"                  },
    { Key::GUILLEMOTLEFT                 , "Guillemotleft"                },
    { Key::NOTSIGN                       , "Notsign"                      },
    { Key::HYPHEN                        , "Hyphen"                       },
    { Key::REGISTERED                    , "Registered"                   },
    { Key::MACRON                        , "Macron"                       },
    { Key::DEGREE                        , "Degree"                       },
    { Key::PLUSMINUS                     , "Plusminus"                    },
    { Key::TWOSUPERIOR                   , "Twosuperior"                  },
    { Key::THREESUPERIOR                 , "Threesuperior"                },
    { Key::ACUTE                         , "Acute"                        },
    { Key::MU                            , "Mu"                           },
    { Key::PARAGRAPH                     , "Paragraph"                    },
    { Key::PERIODCENTERED                , "Periodcentered"               },
    { Key::CEDILLA                       , "Cedilla"                      },
    { Key::ONESUPERIOR                   , "Onesuperior"                  },
    { Key::MASCULINE                     , "Masculine"                    },
    { Key::GUILLEMOTRIGHT                , "Guillemotright"               },
    { Key::ONEQUARTER                    , "Onequarter"                   },
    { Key::ONEHALF                       , "Onehalf"                      },
    { Key::THREEQUARTERS                 , "Threequarters"                },
    { Key::QUESTIONDOWN                  , "Questiondown"                 },
    { Key::AGRAVE                        , "Agrave"                       },
    { Key::AACUTE                        , "Aacute"                       },
    { Key::ACIRCUMFLEX                   , "Acircumflex"                  },
    { Key::ATILDE                        , "Atilde"                       },
    { Key::ADIAERESIS                    , "Adiaeresis"                   },
    { Key::ARING                         , "Aring"                        },
    { Key::AE                            , "Ae"                           },
    { Key::CCEDILLA                      , "Ccedilla"                     },
    { Key::EGRAVE                        , "Egrave"                       },
    { Key::EACUTE                        , "Eacute"                       },
    { Key::ECIRCUMFLEX                   , "Ecircumflex"                  },
    { Key::EDIAERESIS                    , "Ediaeresis"                   },
    { Key::IGRAVE                        , "Igrave"                       },
    { Key::IACUTE                        , "Iacute"                       },
    { Key::ICIRCUMFLEX                   , "Icircumflex"                  },
    { Key::IDIAERESIS                    , "Idiaeresis"                   },
    { Key::ETH                           , "Eth"                          },
    { Key::NTILDE                        , "Ntilde"                       },
    { Key::OGRAVE                        , "Ograve"                       },
    { Key::OACUTE                        , "Oacute"                       },
    { Key::OCIRCUMFLEX                   , "Ocircumflex"                  },
    { Key::OTILDE                        , "Otilde"                       },
    { Key::ODIAERESIS                    , "Odiaeresis"                   },
    { Key::MULTIPLY                      , "Multiply"                     },
    { Key::OOBLIQUE                      , "Ooblique"                     },
    { Key::UGRAVE                        , "Ugrave"                       },
    { Key::UACUTE                        , "Uacute"                       },
    { Key::UCIRCUMFLEX                   , "Ucircumflex"                  },
    { Key::UDIAERESIS                    , "Udiaeresis"                   },
    { Key::YACUTE                        , "Yacute"                       },
    { Key::THORN                         , "Thorn"                        },
    { Key::SSHARP                        , "Ssharp"                       },
    { Key::DIVISION                      , "Division"                     },
    { Key::YDIAERESIS                    , "Ydiaeresis"                   },
    { Key::MULTI_KEY                     , "MultiKey"                     },
    { Key::CODEINPUT                     , "Codeinput"                    },
    { Key::SINGLE_CANDIDATE              , "SingleCandidate"              },
    { Key::MULTIPLE_CANDIDATE            , "MultipleCandidate"            },
    { Key::PREVIOUS_CANDIDATE            , "PreviousCandidate"            },
    { Key::MODE_SWITCH                   , "ModeSwitch"                   },
    { Key::KANJI                         , "Kanji"                        },
    { Key::MUHENKAN                      , "Muhenkan"                     },
    { Key::HENKAN                        , "Henkan"                       },
    { Key::ROMAJI                        , "Romaji"                       },
    { Key::HIRAGANA                      , "Hiragana"                     },
    { Key::KATAKANA                      , "Katakana"                     },
    { Key::HIRAGANA_KATAKANA             , "HiraganaKatakana"             },
    { Key::ZENKAKU                       , "Zenkaku"                      },
    { Key::HANKAKU                       , "Hankaku"                      },
    { Key::ZENKAKU_HANKAKU               , "ZenkakuHankaku"               },
    { Key::TOUROKU                       , "Touroku"                      },
    { Key::MASSYO                        , "Massyo"                       },
    { Key::KANA_LOCK                     , "KanaLock"                     },
    { Key::KANA_SHIFT                    , "KanaShift"                    },
    { Key::EISU_SHIFT                    , "EisuShift"                    },
    { Key::EISU_TOGGLE                   , "EisuToggle"                   },
    { Key::HANGUL                        , "Hangul"                       },
    { Key::HANGUL_START                  , "HangulStart"                  },
    { Key::HANGUL_END                    , "HangulEnd"                    },
    { Key::HANGUL_HANJA                  , "HangulHanja"                  },
    { Key::HANGUL_JAMO                   , "HangulJamo"                   },
    { Key::HANGUL_ROMAJA                 , "HangulRomaja"                 },
    { Key::HANGUL_JEONJA                 , "HangulJeonja"                 },
    { Key::HANGUL_BANJA                  , "HangulBanja"                  },
    { Key::HANGUL_PREHANJA               , "HangulPrehanja"               },
    { Key::HANGUL_POSTHANJA              , "HangulPosthanja"              },
    { Key::HANGUL_SPECIAL                , "HangulSpecial"                },
    { Key::DEAD_GRAVE                    , "DeadGrave"                    },
    { Key::DEAD_ACUTE                    , "DeadAcute"                    },
    { Key::DEAD_CIRCUMFLEX               , "DeadCircumflex"               },
    { Key::DEAD_TILDE                    , "DeadTilde"                    },
    { Key::DEAD_MACRON                   , "DeadMacron"                   },
    { Key::DEAD_BREVE                    , "DeadBreve"                    },
    { Key::DEAD_ABOVEDOT                 , "DeadAbovedot"                 },
    { Key::DEAD_DIAERESIS                , "DeadDiaeresis"                },
    { Key::DEAD_ABOVERING                , "DeadAbovering"                },
    { Key::DEAD_DOUBLEACUTE              , "DeadDoubleacute"              },
    { Key::DEAD_CARON                    , "DeadCaron"                    },
    { Key::DEAD_CEDILLA                  , "DeadCedilla"                  },
    { Key::DEAD_OGONEK                   , "DeadOgonek"                   },
    { Key::DEAD_IOTA                     , "DeadIota"                     },
    { Key::DEAD_VOICED_SOUND             , "DeadVoicedSound"              },
    { Key::DEAD_SEMIVOICED_SOUND         , "DeadSemivoicedSound"          },
    { Key::DEAD_BELOWDOT                 , "DeadBelowdot"                 },
    { Key::DEAD_HOOK                     , "DeadHook"                     },
    { Key::DEAD_HORN                     , "DeadHorn"                     },
    { Key::BACK                          , "Back"                         },
    { Key::FORWARD                       , "Forward"                      },
    { Key::STOP                          , "Stop"                         },
    { Key::REFRESH                       , "Refresh"                      },
    { Key::VOLUME_DOWN                   , "VolumeDown"                   },
    { Key::VOLUME_MUTE                   , "VolumeMute"                   },
    { Key::VOLUME_UP                     , "VolumeUp"                     },
    { Key::BASS_BOOST                    , "BassBoost"                    },
    { Key::BASS_UP                       , "BassUp"                       },
    { Key::BASS_DOWN                     , "BassDown"                     },
    { Key::TREBLE_UP                     , "TrebleUp"                     },
    { Key::TREBLE_DOWN                   , "TrebleDown"                   },
    { Key::MEDIA_PLAY                    , "MediaPlay"                    },
    { Key::MEDIA_STOP                    , "MediaStop"                    },
    { Key::MEDIA_PREVIOUS                , "MediaPrevious"                },
    { Key::MEDIA_NEXT                    , "MediaNext"                    },
    { Key::MEDIA_RECORD                  , "MediaRecord"                  },
    { Key::MEDIA_PAUSE                   , "MediaPause"                   },
    { Key::MEDIA_TOGGLE_PLAY_PAUSE       , "MediaTogglePlayPause"         },
    { Key::HOME_PAGE                     , "HomePage"                     },
    { Key::FAVORITES                     , "Favorites"                    },
    { Key::SEARCH                        , "Search"                       },
    { Key::STANDBY                       , "Standby"                      },
    { Key::OPEN_URL                      , "OpenUrl"                      },
    { Key::LAUNCH_MAIL                   , "LaunchMail"                   },
    { Key::LAUNCH_MEDIA                  , "LaunchMedia"                  },
    { Key::LAUNCH_0                      , "Launch0"                      },
    { Key::LAUNCH_1                      , "Launch1"                      },
    { Key::LAUNCH_2                      , "Launch2"                      },
    { Key::LAUNCH_3                      , "Launch3"                      },
    { Key::LAUNCH_4                      , "Launch4"                      },
    { Key::LAUNCH_5                      , "Launch5"                      },
    { Key::LAUNCH_6                      , "Launch6"                      },
    { Key::LAUNCH_7                      , "Launch7"                      },
    { Key::LAUNCH_8                      , "Launch8"                      },
    { Key::LAUNCH_9                      , "Launch9"                      },
    { Key::LAUNCH_A                      , "LaunchA"                      },
    { Key::LAUNCH_B                      , "LaunchB"                      },
    { Key::LAUNCH_C                      , "LaunchC"                      },
    { Key::LAUNCH_D                      , "LaunchD"                      },
    { Key::LAUNCH_E                      , "LaunchE"                      },
    { Key::LAUNCH_F                      , "LaunchF"                      },
    { Key::LAUNCH_G                      , "LaunchG"                      },
    { Key::LAUNCH_H                      , "LaunchH"                      },
    { Key::MON_BRIGHTNESS_UP             , "MonBrightnessUp"              },
    { Key::MON_BRIGHTNESS_DOWN           , "MonBrightnessDown"            },
    { Key::KEYBOARD_LIGHT_ON_OFF         , "KeyboardLightOnOff"           },
    { Key::KEYBOARD_BRIGHTNESS_UP        , "KeyboardBrightnessUp"         },
    { Key::KEYBOARD_BRIGHTNESS_DOWN      , "KeyboardBrightnessDown"       },
    { Key::POWER_OFF                     , "PowerOff"                     },
    { Key::WAKE_UP                       , "WakeUp"                       },
    { Key::EJECT                         , "Eject"                        },
    { Key::SCREEN_SAVER                  , "ScreenSaver"                  },
    { Key::WWW                           , "Www"                          },
    { Key::MEMO                          , "Memo"                         },
    { Key::LIGHT_BULB                    , "LightBulb"                    },
    { Key::SHOP                          , "Shop"                         },
    { Key::HISTORY                       , "History"                      },
    { Key::ADD_FAVORITE                  , "AddFavorite"                  },
    { Key::HOT_LINKS                     , "HotLinks"                     },
    { Key::BRIGHTNESS_ADJUST             , "BrightnessAdjust"             },
    { Key::FINANCE                       , "Finance"                      },
    { Key::COMMUNITY                     , "Community"                    },
    { Key::AUDIO_REWIND                  , "AudioRewind"                  },
    { Key::BACK_FORWARD                  , "BackForward"                  },
    { Key::APPLICATION_LEFT              , "ApplicationLeft"              },
    { Key::APPLICATION_RIGHT             , "ApplicationRight"             },
    { Key::BOOK                          , "Book"                         },
    { Key::CD                            , "Cd"                           },
    { Key::CALCULATOR                    , "Calculator"                   },
    { Key::TO_DO_LIST                    , "ToDoList"                     },
    { Key::CLEAR_GRAB                    , "ClearGrab"                    },
    { Key::CLOSE                         , "Close"                        },
    { Key::COPY                          , "Copy"                         },
    { Key::CUT                           , "Cut"                          },
    { Key::DISPLAY                       , "Display"                      },
    { Key::DOS                           , "Dos"                          },
    { Key::DOCUMENTS                     , "Documents"                    },
    { Key::EXCEL                         , "Excel"                        },
    { Key::EXPLORER                      , "Explorer"                     },
    { Key::GAME                          , "Game"                         },
    { Key::GO                            , "Go"                           },
    { Key::ITOUCH                        , "Itouch"                       },
    { Key::LOG_OFF                       , "LogOff"                       },
    { Key::MARKET                        , "Market"                       },
    { Key::MEETING                       , "Meeting"                      },
    { Key::MENU_KB                       , "MenuKb"                       },
    { Key::MENU_PB                       , "MenuPb"                       },
    { Key::MY_SITES                      , "MySites"                      },
    { Key::NEWS                          , "News"                         },
    { Key::OFFICEHOME                    , "Officehome"                   },
    { Key::OPTION                        , "Option"                       },
    { Key::PASTE                         , "Paste"                        },
    { Key::PHONE                         , "Phone"                        },
    { Key::CALENDAR                      , "Calendar"                     },
    { Key::REPLY                         , "Reply"                        },
    { Key::RELOAD                        , "Reload"                       },
    { Key::ROTATE_WINDOWS                , "RotateWindows"                },
    { Key::ROTATION_PB                   , "RotationPb"                   },
    { Key::ROTATION_KB                   , "RotationKb"                   },
    { Key::SAVE                          , "Save"                         },
    { Key::SEND                          , "Send"                         },
    { Key::SPELL                         , "Spell"                        },
    { Key::SPLIT_SCREEN                  , "SplitScreen"                  },
    { Key::SUPPORT                       , "Support"                      },
    { Key::TASK_PANE                     , "TaskPane"                     },
    { Key::TERMINAL                      , "Terminal"                     },
    { Key::TOOLS                         , "Tools"                        },
    { Key::TRAVEL                        , "Travel"                       },
    { Key::VIDEO                         , "Video"                        },
    { Key::WORD                          , "Word"                         },
    { Key::XFER                          , "Xfer"                         },
    { Key::ZOOM_IN                       , "ZoomIn"                       },
    { Key::ZOOM_OUT                      , "ZoomOut"                      },
    { Key::AWAY                          , "Away"                         },
    { Key::MESSENGER                     , "Messenger"                    },
    { Key::WEB_CAM                       , "WebCam"                       },
    { Key::MAIL_FORWARD                  , "MailForward"                  },
    { Key::PICTURES                      , "Pictures"                     },
    { Key::MUSIC                         , "Music"                        },
    { Key::BATTERY                       , "Battery"                      },
    { Key::BLUETOOTH                     , "Bluetooth"                    },
    { Key::WLAN                          , "Wlan"                         },
    { Key::UWB                           , "Uwb"                          },
    { Key::AUDIO_FORWARD                 , "AudioForward"                 },
    { Key::AUDIO_REPEAT                  , "AudioRepeat"                  },
    { Key::AUDIO_RANDOM_PLAY             , "AudioRandomPlay"              },
    { Key::SUBTITLE                      , "Subtitle"                     },
    { Key::AUDIO_CYCLE_TRACK             , "AudioCycleTrack"              },
    { Key::TIME                          , "Time"                         },
    { Key::HIBERNATE                     , "Hibernate"                    },
    { Key::VIEW                          , "View"                         },
    { Key::TOP_MENU                      , "TopMenu"                      },
    { Key::POWER_DOWN                    , "PowerDown"                    },
    { Key::SUSPEND                       , "Suspend"                      },
    { Key::CONTRAST_ADJUST               , "ContrastAdjust"               },
    { Key::MEDIA_LAST                    , "MediaLast"                    },
    { Key::UNKNOWN                       , "Unknown"                      },
    { Key::CALL                          , "Call"                         },
    { Key::CAMERA                        , "Camera"                       },
    { Key::CAMERA_FOCUS                  , "CameraFocus"                  },
    { Key::CONTEXT_1                     , "Context1"                     },
    { Key::CONTEXT_2                     , "Context2"                     },
    { Key::CONTEXT_3                     , "Context3"                     },
    { Key::CONTEXT_4                     , "Context4"                     },
    { Key::FLIP                          , "Flip"                         },
    { Key::HANGUP                        , "Hangup"                       },
    { Key::NO                            , "No"                           },
    { Key::SELECT                        , "Select"                       },
    { Key::YES                           , "Yes"                          },
    { Key::TOGGLE_CALL_HANGUP            , "ToggleCallHangup"             },
    { Key::VOICE_DIAL                    , "VoiceDial"                    },
    { Key::LAST_NUMBER_REDIAL            , "LastNumberRedial"             },
    { Key::EXECUTE                       , "Execute"                      },
    { Key::PRINTER                       , "Printer"                      },
    { Key::PLAY                          , "Play"                         },
    { Key::SLEEP                         , "Sleep"                        },
    { Key::ZOOM                          , "Zoom"                         },
    { Key::CANCEL                        , "Cancel"                       },
};

map<string, Key> str_to_key = {
    { "escape"                           , Key::ESCAPE                    },
    { "esc"                              , Key::ESCAPE                    },
    { "tab"                              , Key::TAB                       },
    { "backtab"                          , Key::BACKTAB                   },
    { "backspace"                        , Key::BACKSPACE                 },
    { "bs"                               , Key::BACKSPACE                 },
    { "return"                           , Key::RETURN                    },
    { "enter"                            , Key::ENTER                     },
    { "cr"                               , Key::ENTER                     },
    { "insert"                           , Key::INSERT                    },
    { "delete"                           , Key::DELETE                    },
    { "pause"                            , Key::PAUSE                     },
    { "print"                            , Key::PRINT                     },
    { "sysreq"                           , Key::SYSREQ                    },
    { "clear"                            , Key::CLEAR                     },
    { "home"                             , Key::HOME                      },
    { "end"                              , Key::END                       },
    { "left"                             , Key::LEFT                      },
    { "up"                               , Key::UP                        },
    { "right"                            , Key::RIGHT                     },
    { "down"                             , Key::DOWN                      },
    { "pageup"                           , Key::PAGE_UP                   },
    { "pgup"                             , Key::PAGE_UP                   },
    { "pagedown"                         , Key::PAGE_DOWN                 },
    { "pgdown"                           , Key::PAGE_DOWN                 },
    { "shift"                            , Key::SHIFT                     },
    { "s"                                , Key::SHIFT                     },
    { "control"                          , Key::CONTROL                   },
    { "ctrl"                             , Key::CONTROL                   },
    { "c"                                , Key::CONTROL                   },
    { "meta"                             , Key::META                      },
    { "alt"                              , Key::ALT                       },
    { "a"                                , Key::ALT                       },
    { "altgr"                            , Key::ALTGR                     },
    { "capslock"                         , Key::CAPS_LOCK                 },
    { "numlock"                          , Key::NUM_LOCK                  },
    { "scrolllock"                       , Key::SCROLL_LOCK               },
    { "f1"                               , Key::F1                        },
    { "f2"                               , Key::F2                        },
    { "f3"                               , Key::F3                        },
    { "f4"                               , Key::F4                        },
    { "f5"                               , Key::F5                        },
    { "f6"                               , Key::F6                        },
    { "f7"                               , Key::F7                        },
    { "f8"                               , Key::F8                        },
    { "f9"                               , Key::F9                        },
    { "f10"                              , Key::F10                       },
    { "f11"                              , Key::F11                       },
    { "f12"                              , Key::F12                       },
    { "f13"                              , Key::F13                       },
    { "f14"                              , Key::F14                       },
    { "f15"                              , Key::F15                       },
    { "f16"                              , Key::F16                       },
    { "f17"                              , Key::F17                       },
    { "f18"                              , Key::F18                       },
    { "f19"                              , Key::F19                       },
    { "f20"                              , Key::F20                       },
    { "f21"                              , Key::F21                       },
    { "f22"                              , Key::F22                       },
    { "f23"                              , Key::F23                       },
    { "f24"                              , Key::F24                       },
    { "f25"                              , Key::F25                       },
    { "f26"                              , Key::F26                       },
    { "f27"                              , Key::F27                       },
    { "f28"                              , Key::F28                       },
    { "f29"                              , Key::F29                       },
    { "f30"                              , Key::F30                       },
    { "f31"                              , Key::F31                       },
    { "f32"                              , Key::F32                       },
    { "f33"                              , Key::F33                       },
    { "f34"                              , Key::F34                       },
    { "f35"                              , Key::F35                       },
    { "superl"                           , Key::SUPER_L                   },
    { "super"                            , Key::SUPER_L                   },
    { "winl"                             , Key::SUPER_L                   },
    { "win"                              , Key::SUPER_L                   },
    { "superr"                           , Key::SUPER_R                   },
    { "winr"                             , Key::SUPER_R                   },
    { "menu"                             , Key::MENU                      },
    { "hyperl"                           , Key::HYPER_L                   },
    { "hyperr"                           , Key::HYPER_R                   },
    { "help"                             , Key::HELP                      },
    { "directionl"                       , Key::DIRECTION_L               },
    { "directionr"                       , Key::DIRECTION_R               },
    { "space"                            , Key::SPACE                     },
    { "any"                              , Key::ANY                       },
    { "exclam"                           , Key::EXCLAM                    },
    { "quotedbl"                         , Key::QUOTE_DBL                 },
    { "numbersign"                       , Key::NUMBER_SIGN               },
    { "dollar"                           , Key::DOLLAR                    },
    { "percent"                          , Key::PERCENT                   },
    { "ampersand"                        , Key::AMPERSAND                 },
    { "apostrophe"                       , Key::APOSTROPHE                },
    { "parenleft"                        , Key::PAREN_LEFT                },
    { "parenright"                       , Key::PAREN_RIGHT               },
    { "asterisk"                         , Key::ASTERISK                  },
    { "plus"                             , Key::PLUS                      },
    { "comma"                            , Key::COMMA                     },
    { "minus"                            , Key::MINUS                     },
    { "period"                           , Key::PERIOD                    },
    { "slash"                            , Key::SLASH                     },
    { "num0"                             , Key::NUM_0                     },
    { "num1"                             , Key::NUM_1                     },
    { "num2"                             , Key::NUM_2                     },
    { "num3"                             , Key::NUM_3                     },
    { "num4"                             , Key::NUM_4                     },
    { "num5"                             , Key::NUM_5                     },
    { "num6"                             , Key::NUM_6                     },
    { "num7"                             , Key::NUM_7                     },
    { "num8"                             , Key::NUM_8                     },
    { "num9"                             , Key::NUM_9                     },
    { "colon"                            , Key::COLON                     },
    { "semicolon"                        , Key::SEMICOLON                 },
    { "less"                             , Key::LESS                      },
    { "equal"                            , Key::EQUAL                     },
    { "greater"                          , Key::GREATER                   },
    { "question"                         , Key::QUESTION                  },
    { "at"                               , Key::AT                        },
    { "a"                                , Key::A                         },
    { "b"                                , Key::B                         },
    { "c"                                , Key::C                         },
    { "d"                                , Key::D                         },
    { "e"                                , Key::E                         },
    { "f"                                , Key::F                         },
    { "g"                                , Key::G                         },
    { "h"                                , Key::H                         },
    { "i"                                , Key::I                         },
    { "j"                                , Key::J                         },
    { "k"                                , Key::K                         },
    { "l"                                , Key::L                         },
    { "m"                                , Key::M                         },
    { "n"                                , Key::N                         },
    { "o"                                , Key::O                         },
    { "p"                                , Key::P                         },
    { "q"                                , Key::Q                         },
    { "r"                                , Key::R                         },
    { "s"                                , Key::S                         },
    { "t"                                , Key::T                         },
    { "u"                                , Key::U                         },
    { "v"                                , Key::V                         },
    { "w"                                , Key::W                         },
    { "x"                                , Key::X                         },
    { "y"                                , Key::Y                         },
    { "z"                                , Key::Z                         },
    { "bracketleft"                      , Key::BRACKET_LEFT              },
    { "backslash"                        , Key::BACKSLASH                 },
    { "bracketright"                     , Key::BRACKET_RIGHT             },
    { "asciicircum"                      , Key::ASCII_CIRCUM              },
    { "underscore"                       , Key::UNDERSCORE                },
    { "quoteleft"                        , Key::QUOTE_LEFT                },
    { "braceleft"                        , Key::BRACE_LEFT                },
    { "bar"                              , Key::BAR                       },
    { "braceright"                       , Key::BRACE_RIGHT               },
    { "asciitilde"                       , Key::ASCII_TILDE               },
    { "nobreakspace"                     , Key::NOBREAKSPACE              },
    { "exclamdown"                       , Key::EXCLAMDOWN                },
    { "cent"                             , Key::CENT                      },
    { "sterling"                         , Key::STERLING                  },
    { "currency"                         , Key::CURRENCY                  },
    { "yen"                              , Key::YEN                       },
    { "brokenbar"                        , Key::BROKENBAR                 },
    { "section"                          , Key::SECTION                   },
    { "diaeresis"                        , Key::DIAERESIS                 },
    { "copyright"                        , Key::COPYRIGHT                 },
    { "ordfeminine"                      , Key::ORDFEMININE               },
    { "guillemotleft"                    , Key::GUILLEMOTLEFT             },
    { "notsign"                          , Key::NOTSIGN                   },
    { "hyphen"                           , Key::HYPHEN                    },
    { "registered"                       , Key::REGISTERED                },
    { "macron"                           , Key::MACRON                    },
    { "degree"                           , Key::DEGREE                    },
    { "plusminus"                        , Key::PLUSMINUS                 },
    { "twosuperior"                      , Key::TWOSUPERIOR               },
    { "threesuperior"                    , Key::THREESUPERIOR             },
    { "acute"                            , Key::ACUTE                     },
    { "mu"                               , Key::MU                        },
    { "paragraph"                        , Key::PARAGRAPH                 },
    { "periodcentered"                   , Key::PERIODCENTERED            },
    { "cedilla"                          , Key::CEDILLA                   },
    { "onesuperior"                      , Key::ONESUPERIOR               },
    { "masculine"                        , Key::MASCULINE                 },
    { "guillemotright"                   , Key::GUILLEMOTRIGHT            },
    { "onequarter"                       , Key::ONEQUARTER                },
    { "onehalf"                          , Key::ONEHALF                   },
    { "threequarters"                    , Key::THREEQUARTERS             },
    { "questiondown"                     , Key::QUESTIONDOWN              },
    { "agrave"                           , Key::AGRAVE                    },
    { "aacute"                           , Key::AACUTE                    },
    { "acircumflex"                      , Key::ACIRCUMFLEX               },
    { "atilde"                           , Key::ATILDE                    },
    { "adiaeresis"                       , Key::ADIAERESIS                },
    { "aring"                            , Key::ARING                     },
    { "ae"                               , Key::AE                        },
    { "ccedilla"                         , Key::CCEDILLA                  },
    { "egrave"                           , Key::EGRAVE                    },
    { "eacute"                           , Key::EACUTE                    },
    { "ecircumflex"                      , Key::ECIRCUMFLEX               },
    { "ediaeresis"                       , Key::EDIAERESIS                },
    { "igrave"                           , Key::IGRAVE                    },
    { "iacute"                           , Key::IACUTE                    },
    { "icircumflex"                      , Key::ICIRCUMFLEX               },
    { "idiaeresis"                       , Key::IDIAERESIS                },
    { "eth"                              , Key::ETH                       },
    { "ntilde"                           , Key::NTILDE                    },
    { "ograve"                           , Key::OGRAVE                    },
    { "oacute"                           , Key::OACUTE                    },
    { "ocircumflex"                      , Key::OCIRCUMFLEX               },
    { "otilde"                           , Key::OTILDE                    },
    { "odiaeresis"                       , Key::ODIAERESIS                },
    { "multiply"                         , Key::MULTIPLY                  },
    { "ooblique"                         , Key::OOBLIQUE                  },
    { "ugrave"                           , Key::UGRAVE                    },
    { "uacute"                           , Key::UACUTE                    },
    { "ucircumflex"                      , Key::UCIRCUMFLEX               },
    { "udiaeresis"                       , Key::UDIAERESIS                },
    { "yacute"                           , Key::YACUTE                    },
    { "thorn"                            , Key::THORN                     },
    { "ssharp"                           , Key::SSHARP                    },
    { "division"                         , Key::DIVISION                  },
    { "ydiaeresis"                       , Key::YDIAERESIS                },
    { "multikey"                         , Key::MULTI_KEY                 },
    { "codeinput"                        , Key::CODEINPUT                 },
    { "singlecandidate"                  , Key::SINGLE_CANDIDATE          },
    { "multiplecandidate"                , Key::MULTIPLE_CANDIDATE        },
    { "previouscandidate"                , Key::PREVIOUS_CANDIDATE        },
    { "modeswitch"                       , Key::MODE_SWITCH               },
    { "kanji"                            , Key::KANJI                     },
    { "muhenkan"                         , Key::MUHENKAN                  },
    { "henkan"                           , Key::HENKAN                    },
    { "romaji"                           , Key::ROMAJI                    },
    { "hiragana"                         , Key::HIRAGANA                  },
    { "katakana"                         , Key::KATAKANA                  },
    { "hiraganakatakana"                 , Key::HIRAGANA_KATAKANA         },
    { "zenkaku"                          , Key::ZENKAKU                   },
    { "hankaku"                          , Key::HANKAKU                   },
    { "zenkakuhankaku"                   , Key::ZENKAKU_HANKAKU           },
    { "touroku"                          , Key::TOUROKU                   },
    { "massyo"                           , Key::MASSYO                    },
    { "kanalock"                         , Key::KANA_LOCK                 },
    { "kanashift"                        , Key::KANA_SHIFT                },
    { "eisushift"                        , Key::EISU_SHIFT                },
    { "eisutoggle"                       , Key::EISU_TOGGLE               },
    { "hangul"                           , Key::HANGUL                    },
    { "hangulstart"                      , Key::HANGUL_START              },
    { "hangulend"                        , Key::HANGUL_END                },
    { "hangulhanja"                      , Key::HANGUL_HANJA              },
    { "hanguljamo"                       , Key::HANGUL_JAMO               },
    { "hangulromaja"                     , Key::HANGUL_ROMAJA             },
    { "hanguljeonja"                     , Key::HANGUL_JEONJA             },
    { "hangulbanja"                      , Key::HANGUL_BANJA              },
    { "hangulprehanja"                   , Key::HANGUL_PREHANJA           },
    { "hangulposthanja"                  , Key::HANGUL_POSTHANJA          },
    { "hangulspecial"                    , Key::HANGUL_SPECIAL            },
    { "deadgrave"                        , Key::DEAD_GRAVE                },
    { "deadacute"                        , Key::DEAD_ACUTE                },
    { "deadcircumflex"                   , Key::DEAD_CIRCUMFLEX           },
    { "deadtilde"                        , Key::DEAD_TILDE                },
    { "deadmacron"                       , Key::DEAD_MACRON               },
    { "deadbreve"                        , Key::DEAD_BREVE                },
    { "deadabovedot"                     , Key::DEAD_ABOVEDOT             },
    { "deaddiaeresis"                    , Key::DEAD_DIAERESIS            },
    { "deadabovering"                    , Key::DEAD_ABOVERING            },
    { "deaddoubleacute"                  , Key::DEAD_DOUBLEACUTE          },
    { "deadcaron"                        , Key::DEAD_CARON                },
    { "deadcedilla"                      , Key::DEAD_CEDILLA              },
    { "deadogonek"                       , Key::DEAD_OGONEK               },
    { "deadiota"                         , Key::DEAD_IOTA                 },
    { "deadvoicedsound"                  , Key::DEAD_VOICED_SOUND         },
    { "deadsemivoicedsound"              , Key::DEAD_SEMIVOICED_SOUND     },
    { "deadbelowdot"                     , Key::DEAD_BELOWDOT             },
    { "deadhook"                         , Key::DEAD_HOOK                 },
    { "deadhorn"                         , Key::DEAD_HORN                 },
    { "back"                             , Key::BACK                      },
    { "forward"                          , Key::FORWARD                   },
    { "stop"                             , Key::STOP                      },
    { "refresh"                          , Key::REFRESH                   },
    { "volumedown"                       , Key::VOLUME_DOWN               },
    { "volumemute"                       , Key::VOLUME_MUTE               },
    { "volumeup"                         , Key::VOLUME_UP                 },
    { "bassboost"                        , Key::BASS_BOOST                },
    { "bassup"                           , Key::BASS_UP                   },
    { "bassdown"                         , Key::BASS_DOWN                 },
    { "trebleup"                         , Key::TREBLE_UP                 },
    { "trebledown"                       , Key::TREBLE_DOWN               },
    { "mediaplay"                        , Key::MEDIA_PLAY                },
    { "mediastop"                        , Key::MEDIA_STOP                },
    { "mediaprevious"                    , Key::MEDIA_PREVIOUS            },
    { "medianext"                        , Key::MEDIA_NEXT                },
    { "mediarecord"                      , Key::MEDIA_RECORD              },
    { "mediapause"                       , Key::MEDIA_PAUSE               },
    { "mediatoggleplaypause"             , Key::MEDIA_TOGGLE_PLAY_PAUSE   },
    { "homepage"                         , Key::HOME_PAGE                 },
    { "favorites"                        , Key::FAVORITES                 },
    { "search"                           , Key::SEARCH                    },
    { "standby"                          , Key::STANDBY                   },
    { "openurl"                          , Key::OPEN_URL                  },
    { "launchmail"                       , Key::LAUNCH_MAIL               },
    { "launchmedia"                      , Key::LAUNCH_MEDIA              },
    { "launch0"                          , Key::LAUNCH_0                  },
    { "launch1"                          , Key::LAUNCH_1                  },
    { "launch2"                          , Key::LAUNCH_2                  },
    { "launch3"                          , Key::LAUNCH_3                  },
    { "launch4"                          , Key::LAUNCH_4                  },
    { "launch5"                          , Key::LAUNCH_5                  },
    { "launch6"                          , Key::LAUNCH_6                  },
    { "launch7"                          , Key::LAUNCH_7                  },
    { "launch8"                          , Key::LAUNCH_8                  },
    { "launch9"                          , Key::LAUNCH_9                  },
    { "launcha"                          , Key::LAUNCH_A                  },
    { "launchb"                          , Key::LAUNCH_B                  },
    { "launchc"                          , Key::LAUNCH_C                  },
    { "launchd"                          , Key::LAUNCH_D                  },
    { "launche"                          , Key::LAUNCH_E                  },
    { "launchf"                          , Key::LAUNCH_F                  },
    { "launchg"                          , Key::LAUNCH_G                  },
    { "launchh"                          , Key::LAUNCH_H                  },
    { "monbrightnessup"                  , Key::MON_BRIGHTNESS_UP         },
    { "monbrightnessdown"                , Key::MON_BRIGHTNESS_DOWN       },
    { "keyboardlightonoff"               , Key::KEYBOARD_LIGHT_ON_OFF     },
    { "keyboardbrightnessup"             , Key::KEYBOARD_BRIGHTNESS_UP    },
    { "keyboardbrightnessdown"           , Key::KEYBOARD_BRIGHTNESS_DOWN  },
    { "poweroff"                         , Key::POWER_OFF                 },
    { "wakeup"                           , Key::WAKE_UP                   },
    { "eject"                            , Key::EJECT                     },
    { "screensaver"                      , Key::SCREEN_SAVER              },
    { "www"                              , Key::WWW                       },
    { "memo"                             , Key::MEMO                      },
    { "lightbulb"                        , Key::LIGHT_BULB                },
    { "shop"                             , Key::SHOP                      },
    { "history"                          , Key::HISTORY                   },
    { "addfavorite"                      , Key::ADD_FAVORITE              },
    { "hotlinks"                         , Key::HOT_LINKS                 },
    { "brightnessadjust"                 , Key::BRIGHTNESS_ADJUST         },
    { "finance"                          , Key::FINANCE                   },
    { "community"                        , Key::COMMUNITY                 },
    { "audiorewind"                      , Key::AUDIO_REWIND              },
    { "backforward"                      , Key::BACK_FORWARD              },
    { "applicationleft"                  , Key::APPLICATION_LEFT          },
    { "applicationright"                 , Key::APPLICATION_RIGHT         },
    { "book"                             , Key::BOOK                      },
    { "cd"                               , Key::CD                        },
    { "calculator"                       , Key::CALCULATOR                },
    { "todolist"                         , Key::TO_DO_LIST                },
    { "cleargrab"                        , Key::CLEAR_GRAB                },
    { "close"                            , Key::CLOSE                     },
    { "copy"                             , Key::COPY                      },
    { "cut"                              , Key::CUT                       },
    { "display"                          , Key::DISPLAY                   },
    { "dos"                              , Key::DOS                       },
    { "documents"                        , Key::DOCUMENTS                 },
    { "excel"                            , Key::EXCEL                     },
    { "explorer"                         , Key::EXPLORER                  },
    { "game"                             , Key::GAME                      },
    { "go"                               , Key::GO                        },
    { "itouch"                           , Key::ITOUCH                    },
    { "logoff"                           , Key::LOG_OFF                   },
    { "market"                           , Key::MARKET                    },
    { "meeting"                          , Key::MEETING                   },
    { "menukb"                           , Key::MENU_KB                   },
    { "menupb"                           , Key::MENU_PB                   },
    { "mysites"                          , Key::MY_SITES                  },
    { "news"                             , Key::NEWS                      },
    { "officehome"                       , Key::OFFICEHOME                },
    { "option"                           , Key::OPTION                    },
    { "paste"                            , Key::PASTE                     },
    { "phone"                            , Key::PHONE                     },
    { "calendar"                         , Key::CALENDAR                  },
    { "reply"                            , Key::REPLY                     },
    { "reload"                           , Key::RELOAD                    },
    { "rotatewindows"                    , Key::ROTATE_WINDOWS            },
    { "rotationpb"                       , Key::ROTATION_PB               },
    { "rotationkb"                       , Key::ROTATION_KB               },
    { "save"                             , Key::SAVE                      },
    { "send"                             , Key::SEND                      },
    { "spell"                            , Key::SPELL                     },
    { "splitscreen"                      , Key::SPLIT_SCREEN              },
    { "support"                          , Key::SUPPORT                   },
    { "taskpane"                         , Key::TASK_PANE                 },
    { "terminal"                         , Key::TERMINAL                  },
    { "tools"                            , Key::TOOLS                     },
    { "travel"                           , Key::TRAVEL                    },
    { "video"                            , Key::VIDEO                     },
    { "word"                             , Key::WORD                      },
    { "xfer"                             , Key::XFER                      },
    { "zoomin"                           , Key::ZOOM_IN                   },
    { "zoomout"                          , Key::ZOOM_OUT                  },
    { "away"                             , Key::AWAY                      },
    { "messenger"                        , Key::MESSENGER                 },
    { "webcam"                           , Key::WEB_CAM                   },
    { "mailforward"                      , Key::MAIL_FORWARD              },
    { "pictures"                         , Key::PICTURES                  },
    { "music"                            , Key::MUSIC                     },
    { "battery"                          , Key::BATTERY                   },
    { "bluetooth"                        , Key::BLUETOOTH                 },
    { "wlan"                             , Key::WLAN                      },
    { "uwb"                              , Key::UWB                       },
    { "audioforward"                     , Key::AUDIO_FORWARD             },
    { "audiorepeat"                      , Key::AUDIO_REPEAT              },
    { "audiorandomplay"                  , Key::AUDIO_RANDOM_PLAY         },
    { "subtitle"                         , Key::SUBTITLE                  },
    { "audiocycletrack"                  , Key::AUDIO_CYCLE_TRACK         },
    { "time"                             , Key::TIME                      },
    { "hibernate"                        , Key::HIBERNATE                 },
    { "view"                             , Key::VIEW                      },
    { "topmenu"                          , Key::TOP_MENU                  },
    { "powerdown"                        , Key::POWER_DOWN                },
    { "suspend"                          , Key::SUSPEND                   },
    { "contrastadjust"                   , Key::CONTRAST_ADJUST           },
    { "medialast"                        , Key::MEDIA_LAST                },
    { "unknown"                          , Key::UNKNOWN                   },
    { "call"                             , Key::CALL                      },
    { "camera"                           , Key::CAMERA                    },
    { "camerafocus"                      , Key::CAMERA_FOCUS              },
    { "context1"                         , Key::CONTEXT_1                 },
    { "context2"                         , Key::CONTEXT_2                 },
    { "context3"                         , Key::CONTEXT_3                 },
    { "context4"                         , Key::CONTEXT_4                 },
    { "flip"                             , Key::FLIP                      },
    { "hangup"                           , Key::HANGUP                    },
    { "no"                               , Key::NO                        },
    { "select"                           , Key::SELECT                    },
    { "yes"                              , Key::YES                       },
    { "togglecallhangup"                 , Key::TOGGLE_CALL_HANGUP        },
    { "voicedial"                        , Key::VOICE_DIAL                },
    { "lastnumberredial"                 , Key::LAST_NUMBER_REDIAL        },
    { "execute"                          , Key::EXECUTE                   },
    { "printer"                          , Key::PRINTER                   },
    { "play"                             , Key::PLAY                      },
    { "sleep"                            , Key::SLEEP                     },
    { "zoom"                             , Key::ZOOM                      },
    { "cancel"                           , Key::CANCEL                    },
};


KeyCombo::KeyCombo(Key key) :
    control(false),
    super(false),
    alt(false),
    shift(false),
    key(key)
{
}

KeyCombo::KeyCombo(bool control, bool super, bool alt, bool shift, Key key) :
    control(control),
    super(super),
    alt(alt),
    shift(shift),
    key(key)
{
}

KeyCombo::KeyCombo(string str) :
    control(false),
    super(false),
    alt(false),
    shift(false)
{
    vector<string> key_list;

    boost::trim(str);
    boost::split(key_list, str, boost::is_any_of("-"));
    for (string &k: key_list) {
        string lower = boost::to_lower_copy(k);

        auto result = str_to_key.find(lower);
        if (result == str_to_key.end()) {
            control = false;
            super = false;
            alt = false;
            shift= false;
            key = Key::UNKNOWN;
            return;
        }

        switch (result->second) {
        case Key::CONTROL:
            control = true;
            break;

        case Key::SUPER_L:
            super = true;
            break;

        case Key::ALT:
            alt = true;
            break;

        case Key::SHIFT:
            shift = true;
            break;

        default:
            key = result->second;
            break;
        }
    }

    mlog->debug("KeyCombo \"{}\" is built", to_string());
}

std::string KeyCombo::to_string()
{
    vector<string> key_list;
    if (control) {
        key_list.push_back(key_to_str[Key::CONTROL]);
    }
    if (alt) {
        key_list.push_back(key_to_str[Key::ALT]);
    }
    if (super) {
        key_list.push_back(key_to_str[Key::SUPER_L]);
    }
    if (shift) {
        key_list.push_back(key_to_str[Key::SHIFT]);
    }
    key_list.push_back(key_to_str[key]);

    return boost::join(key_list, "-");
}
